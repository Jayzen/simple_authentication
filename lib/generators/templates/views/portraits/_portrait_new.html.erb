<div class="col-md-10">
  <div class="card">
    <div class="card-header text-secondary text-center">
      提交头像
    </div>
    <div class="card-body">
      <%= render 'shared/errors' %>
      <%= form_for(:portrait, url: portraits_path) do |f| %>
        <div class="form-group row">
          <div class="col-sm-10">
            <a href="#", class="btn btn-outline-secondary", id="button_trigger" >
              <i class="fa fa-upload fa-fw"></i>头像上传
            </a>
            <%= f.file_field :avatar, class: "form-control text-secondary" %>
            <input type="hidden" name="user_id" value="<%= current_user.id %>" />
          </div>
        </div>
  
        <div class="form-group row">
          <div class="col-sm-10">
            <%= f.submit "提交头像", class: "btn btn-light text-secondary" %>
          </div> 
        </div>
      <% end %>
    </div>
  </div>
</div>
<%= content_for :javascripts do %>
  <script>
    $(document).ready(function(){
      var fileSelect = document.getElementById("button_trigger"),
          fileElem = document.getElementById("portrait_avatar");

      fileSelect.addEventListener("click", function (e) {
        if (fileElem) {
          fileElem.click();
        }
        e.preventDefault(); // prevent navigation to "#"
      }, false);
    });
  </script>
<% end %>
